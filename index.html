<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة الروايات المصورة</title>
    <style>
        :root {
            --primary-color: #f47521;
            --dark-bg: #23252b;
            --darker-bg: #191b1f;
            --light-text: #ffffff;
            --gray-text: #9fadbd;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', Arial, sans-serif;
        }
        
        body {
            background-color: var(--darker-bg);
            color: var(--light-text);
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }
        
        body.night-mode {
            filter: brightness(0.7) contrast(1.1) sepia(0.2);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .logo {
            color: var(--primary-color);
            font-size: 24px;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn-transparent {
            background-color: transparent;
            border: 1px solid var(--primary-color);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            padding-bottom: 5px;
        }
        
        .tab {
            padding: 10px 20px;
            margin-left: 10px;
            cursor: pointer;
            position: relative;
            color: var(--gray-text);
            transition: all 0.3s ease;
        }
        
        .tab.active {
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 3px;
        }
        
        .arcs-container {
            margin-bottom: 30px;
        }
        
        .arc-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chapter-card {
            background-color: var(--dark-bg);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .chapter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .chapter-thumbnail {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
        }
        
        .chapter-info {
            padding: 15px;
        }
        
        .chapter-title {
            font-size: 16px;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .chapter-meta {
            color: var(--gray-text);
            font-size: 12px;
            display: flex;
            justify-content: space-between;
        }
        
        /* Viewer styles */
        .viewer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            display: none;
            flex-direction: column;
        }
        
        .viewer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: var(--darker-bg);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .viewer-title {
            font-size: 18px;
            color: var(--light-text);
        }
        
        .viewer-controls {
            display: flex;
            gap: 15px;
        }
        
        .viewer-btn {
            background-color: transparent;
            color: var(--light-text);
            border: none;
            font-size: 22px;
            cursor: pointer;
            transition: all 0.2s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .viewer-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .viewer-content {
            flex: 1;
            display: flex;
            position: relative;
            overflow: hidden;
        }
        
        .image-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }
        
        .viewer-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transform-origin: center;
            transition: transform 0.3s ease;
        }
        
        .nav-buttons {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            transform: translateY(-50%);
            z-index: 10;
        }
        
        .nav-btn {
            background-color: rgba(35, 37, 43, 0.7);
            color: white;
            border: none;
            font-size: 24px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .nav-btn:hover {
            background-color: var(--primary-color);
        }
        
        .viewer-footer {
            padding: 15px 20px;
            background-color: var(--darker-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .progress-container {
            flex: 1;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 0 20px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0;
            transition: width 0.3s ease;
        }
        
        .page-indicator {
            font-size: 14px;
            color: var(--gray-text);
        }
        
        /* Novel info modal */
        .info-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--dark-bg);
            width: 90%;
            max-width: 600px;
            border-radius: 10px;
            z-index: 1100;
            display: none;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
        
        .info-header {
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            position: relative;
        }
        
        .info-title {
            font-size: 22px;
            margin-bottom: 5px;
        }
        
        .info-author {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .close-info {
            position: absolute;
            top: 15px;
            left: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 22px;
            cursor: pointer;
        }
        
        .info-content {
            padding: 20px;
        }
        
        .info-description {
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--light-text);
        }
        
        .info-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
        }
        
        .info-label {
            font-size: 12px;
            color: var(--gray-text);
            margin-bottom: 3px;
        }
        
        .info-value {
            color: var(--light-text);
        }
        
        /* Saved novels drawer */
        .saved-drawer {
            position: fixed;
            top: 0;
            left: 0;
            width: 300px;
            height: 100%;
            background-color: var(--dark-bg);
            z-index: 1200;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
        }
        
        .saved-drawer.open {
            transform: translateX(0);
        }
        
        .saved-header {
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .saved-title {
            font-size: 18px;
        }
        
        .close-saved {
            background: none;
            border: none;
            color: white;
            font-size: 22px;
            cursor: pointer;
        }
        
        .saved-list {
            padding: 15px;
        }
        
        .saved-item {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .saved-thumb {
            width: 70px;
            height: 70px;
            border-radius: 5px;
            object-fit: cover;
            margin-left: 15px;
        }
        
        .saved-info {
            flex: 1;
        }
        
        .saved-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--light-text);
        }
        
        .saved-chapter {
            font-size: 12px;
            color: var(--gray-text);
        }
        
        .saved-actions {
            display: flex;
            margin-top: 10px;
            gap: 10px;
        }
        
        .saved-btn {
            background-color: transparent;
            color: var(--gray-text);
            border: none;
            font-size: 12px;
            cursor: pointer;
            padding: 3px 8px;
            border-radius: 3px;
            transition: all 0.2s;
        }
        
        .saved-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--light-text);
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1050;
            display: none;
        }
        
        /* Night mode toggle */
        .night-mode-toggle {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }
        
        .toggle-label {
            color: var(--gray-text);
            margin-left: 8px;
            font-size: 14px;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        
        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }
        
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        
        /* Font size control */
        .font-size-control {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }
        
        .font-btn {
            background-color: transparent;
            color: var(--light-text);
            border: none;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            border-radius: 50%;
        }
        
        .font-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .font-size-value {
            color: var(--gray-text);
            margin: 0 5px;
            font-size: 14px;
            min-width: 30px;
            text-align: center;
        }
        
        /* Auto-scroll toggle */
        .auto-scroll-toggle {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }
        
        .auto-scroll-label {
            color: var(--gray-text);
            margin-left: 8px;
            font-size: 14px;
        }
        
        /* Responsive styles */
        @media (max-width: 768px) {
            .chapters-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .chapter-thumbnail {
                height: 200px;
            }
            
            .chapter-info {
                padding: 10px;
            }
            
            .chapter-title {
                font-size: 14px;
            }
            
            .nav-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .viewer-header, .viewer-footer {
                padding: 10px 15px;
            }
            
            .viewer-title {
                font-size: 16px;
            }
            
            .info-modal {
                width: 95%;
            }
            
            .saved-drawer {
                width: 250px;
            }
        }
        
        @media (max-width: 480px) {
            .chapters-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
                gap: 10px;
            }
            
            .chapter-thumbnail {
                height: 180px;
            }
            
            .controls {
                gap: 8px;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 12px;
            }
            
            .viewer-btn {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }
            
            .nav-btn {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .info-meta {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">روايات مصورة</div>
            <div class="controls">
                <button class="btn btn-transparent" id="savedBtn">
                    <i class="fas fa-bookmark"></i>
                    المحفوظات
                </button>
                <button class="btn">
                    <i class="fas fa-sign-in-alt"></i>
                    تسجيل الدخول
                </button>
            </div>
        </header>
        
        <div class="tabs">
            <div class="tab active">الصفحة الرئيسية</div>
            <div class="tab">المفضلة</div>
            <div class="tab">الأحدث</div>
            <div class="tab">الأكثر مشاهدة</div>
            <div class="tab">الفانتازيا</div>
            <div class="tab">الأكشن</div>
            <div class="tab">المغامرات</div>
        </div>
        
        <div class="arcs-container">
            <div class="arc-title">
                <i class="fas fa-fire"></i>
                أرك البداية
            </div>
            
            <div class="chapters-grid">
                <!-- Chapter card 1 -->
                <div class="chapter-card" data-title="الفصل الأول: البداية الغامضة">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%2323252b'/%3E%3Ctext x='100' y='125' font-family='Arial' font-size='16' fill='%23f47521' text-anchor='middle'%3Eالفصل الأول%3C/text%3E%3C/svg%3E" alt="الفصل الأول" class="chapter-thumbnail">
                    <div class="chapter-info">
                        <div class="chapter-title">الفصل الأول: البداية الغامضة</div>
                        <div class="chapter-meta">
                            <span>16 صفحة</span>
                            <span>تاريخ: 10/4/2025</span>
                        </div>
                    </div>
                </div>
                
                <!-- Chapter card 2 -->
                <div class="chapter-card" data-title="الفصل الثاني: التحدي الأول">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%2323252b'/%3E%3Ctext x='100' y='125' font-family='Arial' font-size='16' fill='%23f47521' text-anchor='middle'%3Eالفصل الثاني%3C/text%3E%3C/svg%3E" alt="الفصل الثاني" class="chapter-thumbnail">
                    <div class="chapter-info">
                        <div class="chapter-title">الفصل الثاني: التحدي الأول</div>
                        <div class="chapter-meta">
                            <span>16 صفحة</span>
                            <span>تاريخ: 8/4/2025</span>
                        </div>
                    </div>
                </div>
                
                <!-- Chapter card 3 -->
                <div class="chapter-card" data-title="الفصل الثالث: التحول">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%2323252b'/%3E%3Ctext x='100' y='125' font-family='Arial' font-size='16' fill='%23f47521' text-anchor='middle'%3Eالفصل الثالث%3C/text%3E%3C/svg%3E" alt="الفصل الثالث" class="chapter-thumbnail">
                    <div class="chapter-info">
                        <div class="chapter-title">الفصل الثالث: التحول</div>
                        <div class="chapter-meta">
                            <span>16 صفحة</span>
                            <span>تاريخ: 5/4/2025</span>
                        </div>
                    </div>
                </div>
                
                <!-- Chapter card 4 -->
                <div class="chapter-card" data-title="الفصل الرابع: المواجهة">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%2323252b'/%3E%3Ctext x='100' y='125' font-family='Arial' font-size='16' fill='%23f47521' text-anchor='middle'%3Eالفصل الرابع%3C/text%3E%3C/svg%3E" alt="الفصل الرابع" class="chapter-thumbnail">
                    <div class="chapter-info">
                        <div class="chapter-title">الفصل الرابع: المواجهة</div>
                        <div class="chapter-meta">
                            <span>16 صفحة</span>
                            <span>تاريخ: 1/4/2025</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="arc-title">
                <i class="fas fa-dragon"></i>
                أرك المعركة الكبرى
            </div>
            
            <div class="chapters-grid">
                <!-- Chapter card 5 -->
                <div class="chapter-card" data-title="الفصل الخامس: استعداد للمعركة">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%2323252b'/%3E%3Ctext x='100' y='125' font-family='Arial' font-size='16' fill='%23f47521' text-anchor='middle'%3Eالفصل الخامس%3C/text%3E%3C/svg%3E" alt="الفصل الخامس" class="chapter-thumbnail">
                    <div class="chapter-info">
                        <div class="chapter-title">الفصل الخامس: استعداد للمعركة</div>
                        <div class="chapter-meta">
                            <span>16 صفحة</span>
                            <span>تاريخ: 28/3/2025</span>
                        </div>
                    </div>
                </div>
                
                <!-- Chapter card 6 -->
                <div class="chapter-card" data-title="الفصل السادس: المواجهة الحاسمة">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%2323252b'/%3E%3Ctext x='100' y='125' font-family='Arial' font-size='16' fill='%23f47521' text-anchor='middle'%3Eالفصل السادس%3C/text%3E%3C/svg%3E" alt="الفصل السادس" class="chapter-thumbnail">
                    <div class="chapter-info">
                        <div class="chapter-title">الفصل السادس: المواجهة الحاسمة</div>
                        <div class="chapter-meta">
                            <span>16 صفحة</span>
                            <span>تاريخ: 25/3/2025</span>
                        </div>
                    </div>
                </div>
                
                <!-- Chapter card 7 -->
                <div class="chapter-card" data-title="الفصل السابع: انتصار مؤقت">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%2323252b'/%3E%3Ctext x='100' y='125' font-family='Arial' font-size='16' fill='%23f47521' text-anchor='middle'%3Eالفصل السابع%3C/text%3E%3C/svg%3E" alt="الفصل السابع" class="chapter-thumbnail">
                    <div class="chapter-info">
                        <div class="chapter-title">الفصل السابع: انتصار مؤقت</div>
                        <div class="chapter-meta">
                            <span>16 صفحة</span>
                            <span>تاريخ: 22/3/2025</span>
                        </div>
                    </div>
                </div>
                
                <!-- Chapter card 8 -->
                <div class="chapter-card" data-title="الفصل الثامن: التهديد الجديد">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='250' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%2323252b'/%3E%3Ctext x='100' y='125' font-family='Arial' font-size='16' fill='%23f47521' text-anchor='middle'%3Eالفصل الثامن%3C/text%3E%3C/svg%3E" alt="الفصل الثامن" class="chapter-thumbnail">
                    <div class="chapter-info">
                        <div class="chapter-title">الفصل الثامن: التهديد الجديد</div>
                        <div class="chapter-meta">
                            <span>16 صفحة</span>
                            <span>تاريخ: 19/3/2025</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chapter viewer overlay -->
    <div class="viewer-overlay" id="chapterViewer">
        <div class="viewer-header">
            <div class="viewer-title" id="viewerTitle">عنوان الفصل</div>
            <div class="viewer-controls">
                <div class="night-mode-toggle">
                    <label class="switch">
                        <input type="checkbox" id="nightModeToggle">
                        <span class="slider"></span>
                    </label>
                    <span class="toggle-label">وضع الليل</span>
                </div>
                
                <div class="font-size-control">
                    <button class="font-btn" id="decreaseFont">-</button>
                    <span class="font-size-value" id="fontSizeValue">100%</span>
                    <button class="font-btn" id="increaseFont">+</button>
                </div>
                
                <div class="auto-scroll-toggle">
                    <label class="switch">
                        <input type="checkbox" id="autoScrollToggle">
                        <span class="slider"></span>
                    </label>
                    <span class="auto-scroll-label">تمرير تلقائي</span>
                </div>
                
                <button class="viewer-btn" id="saveChapter">
                    <i class="fas fa-bookmark"></i>
                </button>
                
                <button class="viewer-btn" id="infoButton">
                    <i class="fas fa-info-circle"></i>
                </button>
                
                <button class="viewer-btn" id="closeViewer">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <div class="viewer-content">
            <div class="image-container" id="imageContainer">
                <!-- Images will be loaded dynamically -->
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="nav-btn" id="nextBtn">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
        </div>
        
        <div class="viewer-footer">
            <div class="page-indicator" id="pageIndicator">صفحة 1 من 16</div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
    </div>
    
    <!-- Novel info modal -->
    <div class="info-modal" id="infoModal">
        <div class="info-header">
            <div class="info-title" id="novelTitle">عنوان الرواية</div>
            <div class="info-author" id="novelAuthor">اسم الكاتب</div>
            <button class="close-info" id="closeInfo">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="info-content">
            <div class="info-description" id="novelDescription">
                هذه الرواية تحكي قصة بطل شاب يكتشف قوى خارقة ويبدأ رحلته في عالم مليء بالمغامرات والتحديات. من خلال رحلته، سيتعلم عن أصول قوته ويواجه أعداء أقوياء، ويكوّن صداقات مع شخصيات مختلفة تساعده في مغامراته.
            </div>
            
            <div class="info-meta">
                <div class="info-item">
                    <div class="info-label">تصنيف الرواية</div>
                    <div class="info-value">فانتازيا، مغامرة، أكشن</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">تاريخ النشر</div>
                    <div class="info-value">مارس 2025</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">عدد الفصول</div>
                    <div class="info-value">12 فصل</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">حالة الرواية</div>
                    <div class="info-value">مستمرة</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Saved novels drawer -->
    <div class="saved-drawer" id="savedDrawer">
        <div class="saved-header">
            <div class="saved-title">الروايات المحفوظة</div>
            <button class="close-saved" id="closeSaved">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="saved-list" id="savedList">
            <!-- Will be populated dynamically -->
        </div>
    </div>
    
    <!-- Overlay backdrop -->
    <div class="overlay" id="overlay"></div>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sample data for chapters and pages
            const samplePages = Array.from({length: 16}, (_, i) => 
                `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='1200' viewBox='0 0 800 1200'%3E%3Crect width='800' height='1200' fill='%23ffffff'/%3E%3Crect x='50' y='50' width='700' height='1100' fill='%23f9f9f9' stroke='%23dddddd' stroke-width='1'/%3E%3Ctext x='400' y='600' font-family='Arial' font-size='32' fill='%23333333' text-anchor='middle'%3Eصفحة ${i+1}%3C/text%3E%3C/svg%3E`
            );
            
            // DOM Elements
            const chapterCards = document.querySelectorAll('.chapter-card');
            const chapterViewer = document.getElementById('chapterViewer');
            const imageContainer = document.getElementById('imageContainer');
            const viewerTitle = document.getElementById('viewerTitle');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pageIndicator = document.getElementById('pageIndicator');
            const progressBar = document.getElementById('progressBar');
            const closeViewer = document.getElementById('closeViewer');
            const saveChapter = document.getElementById('saveChapter');
            const infoButton = document.getElementById('infoButton');
            const infoModal = document.getElementById('infoModal');
            const closeInfo = document.getElementById('closeInfo');
            const savedBtn = document.getElementById('savedBtn');
            const savedDrawer = document.getElementById('savedDrawer');
            const closeSaved = document.getElementById('closeSaved');
            const savedList = document.getElementById('savedList');
            const overlay = document.getElementById('overlay');
            const nightModeToggle = document.getElementById('nightModeToggle');
            const increaseFont = document.getElementById('increaseFont');
            const decreaseFont = document.getElementById('decreaseFont');
            const fontSizeValue = document.getElementById('fontSizeValue');
            const autoScrollToggle = document.getElementById('autoScrollToggle');
            
            // State variables
            let currentPage = 0;
            let totalPages = 0;
            let currentChapter = '';
            let zoomLevel = 1;
            let autoScrollInterval = null;
            let savedNovels = JSON.parse(localStorage.getItem('savedNovels')) || [];
            let imageScale = 100;
            let touchStartX = 0;
            let touchEndX = 0;
            let longPressTimer = null;
            
            // Initialize saved novels list
            updateSavedList();
            
            // Chapter card click event
            chapterCards.forEach(card => {
                card.addEventListener('click', function() {
                    openChapter(this.dataset.title);
                });
                
                // Double-tap to share
                let tapCount = 0;
                let tapTimer = null;
                
                card.addEventListener('click', function() {
                    tapCount++;
                    if (tapCount === 1) {
                        tapTimer = setTimeout(function() {
                            tapCount = 0;
                        }, 300);
                    } else if (tapCount === 2) {
                        clearTimeout(tapTimer);
                        tapCount = 0;
                        // Share functionality
                        shareChapter(this.dataset.title);
                    }
                });
                
                // Long press for info
                card.addEventListener('mousedown', function() {
                    longPressTimer = setTimeout(() => {
                        showNovelInfo(this.dataset.title);
                    }, 500);
                });
                
                card.addEventListener('mouseup', function() {
                    clearTimeout(longPressTimer);
                });
                
                card.addEventListener('mouseleave', function() {
                    clearTimeout(longPressTimer);
                });
                
                // Touch events for mobile
                card.addEventListener('touchstart', function(e) {
                    longPressTimer = setTimeout(() => {
                        showNovelInfo(this.dataset.title);
                    }, 500);
                    touchStartX = e.changedTouches[0].screenX;
                });
                
                card.addEventListener('touchend', function(e) {
                    clearTimeout(longPressTimer);
                    touchEndX = e.changedTouches[0].screenX;
                    handleSwipeGesture();
                });
            });
            
            // Open chapter function
            function openChapter(title) {
                currentChapter = title;
                viewerTitle.textContent = title;
                currentPage = 0;
                totalPages = samplePages.length;
                
                // Clear any existing images
                imageContainer.innerHTML = '';
                
                // Load all images
                samplePages.forEach((src, index) => {
                    const img = document.createElement('img');
                    img.src = src;
                    img.className = 'viewer-image';
                    img.style.display = index === 0 ? 'block' : 'none';
                    imageContainer.appendChild(img);
                });
                
                updatePageIndicator();
                updateProgressBar();
                chapterViewer.style.display = 'flex';
            }
            
            // Navigation functions
            function goToPage(page) {
                if (page >= 0 && page < totalPages) {
                    // Hide all images
                    const images = imageContainer.querySelectorAll('.viewer-image');
                    images.forEach((img, index) => {
                        img.style.display = 'none';
                    });
                    
                    // Show the selected page
                    images[page].style.display = 'block';
                    
                    currentPage = page;
                    updatePageIndicator();
                    updateProgressBar();
                }
            }
            
            function nextPage() {
                goToPage(currentPage + 1);
            }
            
            function prevPage() {
                goToPage(currentPage - 1);
            }
            
            // Update UI elements
            function updatePageIndicator() {
                pageIndicator.textContent = `صفحة ${currentPage + 1} من ${totalPages}`;
            }
            
            function updateProgressBar() {
                const progress = ((currentPage + 1) / totalPages) * 100;
                progressBar.style.width = `${progress}%`;
            }
            
            // Save chapter to favorites
            function saveChapter() {
                const isAlreadySaved = savedNovels.some(novel => novel.title === currentChapter);
                
                if (!isAlreadySaved) {
                    savedNovels.push({
                        title: currentChapter,
                        page: currentPage,
                        timestamp: Date.now(),
                        thumbnail: samplePages[0] // Use first page as thumbnail
                    });
                    
                    localStorage.setItem('savedNovels', JSON.stringify(savedNovels));
                    updateSavedList();
                    alert('تم حفظ الفصل بنجاح!');
                } else {
                    // Update existing saved chapter
                    const novelIndex = savedNovels.findIndex(novel => novel.title === currentChapter);
                    savedNovels[novelIndex].page = currentPage;
                    savedNovels[novelIndex].timestamp = Date.now();
                    
                    localStorage.setItem('savedNovels', JSON.stringify(savedNovels));
                    updateSavedList();
                    alert('تم تحديث موضع القراءة!');
                }
            }
            
            // Update saved novels list
            function updateSavedList() {
                savedList.innerHTML = '';
                
                if (savedNovels.length === 0) {
                    savedList.innerHTML = '<div style="padding: 20px; color: var(--gray-text); text-align: center;">لا توجد روايات محفوظة</div>';
                    return;
                }
                
                // Sort by most recent
                savedNovels.sort((a, b) => b.timestamp - a.timestamp);
                
                savedNovels.forEach(novel => {
                    const item = document.createElement('div');
                    item.className = 'saved-item';
                    
                    const dateFormatted = new Date(novel.timestamp).toLocaleDateString('ar-SA');
                    
                    item.innerHTML = `
                        <img src="${novel.thumbnail}" alt="${novel.title}" class="saved-thumb">
                        <div class="saved-info">
                            <div class="saved-name">${novel.title}</div>
                            <div class="saved-chapter">الصفحة ${novel.page + 1} - ${dateFormatted}</div>
                            <div class="saved-actions">
                                <button class="saved-btn continue-btn" data-title="${novel.title}" data-page="${novel.page}">
                                    <i class="fas fa-play"></i> متابعة القراءة
                                </button>
                                <button class="saved-btn delete-btn" data-title="${novel.title}">
                                    <i class="fas fa-trash"></i> حذف
                                </button>
                            </div>
                        </div>
                    `;
                    
                    savedList.appendChild(item);
                });
                
                // Add event listeners to new buttons
                document.querySelectorAll('.continue-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const title = this.dataset.title;
                        const page = parseInt(this.dataset.page);
                        
                        savedDrawer.classList.remove('open');
                        overlay.style.display = 'none';
                        
                        openChapter(title);
                        goToPage(page);
                    });
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const title = this.dataset.title;
                        savedNovels = savedNovels.filter(novel => novel.title !== title);
                        localStorage.setItem('savedNovels', JSON.stringify(savedNovels));
                        updateSavedList();
                    });
                });
            }
            
            // Share functionality
            function shareChapter(title) {
                if (navigator.share) {
                    navigator.share({
                        title: title,
                        text: `أنا أقرأ ${title} على منصة الروايات المصورة`,
                        url: window.location.href,
                    })
                    .catch(error => console.log('Error sharing', error));
                } else {
                    alert(`مشاركة: ${title}`);
                }
            }
            
            // Show novel info
            function showNovelInfo(title) {
                document.getElementById('novelTitle').textContent = title.split(':')[0];
                document.getElementById('novelAuthor').textContent = 'الكاتب: أحمد المصري';
                overlay.style.display = 'block';
                infoModal.style.display = 'block';
            }
            
            // Toggle night mode
            function toggleNightMode() {
                document.body.classList.toggle('night-mode');
            }
            
            // Auto scroll function
            function toggleAutoScroll() {
                if (autoScrollInterval) {
                    clearInterval(autoScrollInterval);
                    autoScrollInterval = null;
                } else {
                    autoScrollInterval = setInterval(() => {
                        if (currentPage < totalPages - 1) {
                            nextPage();
                        } else {
                            // Stop auto-scroll when reaching the end
                            clearInterval(autoScrollInterval);
                            autoScrollInterval = null;
                            autoScrollToggle.checked = false;
                        }
                    }, 3000); // Change page every 3 seconds
                }
            }
            
            // Handle swipe gesture for touch devices
            function handleSwipeGesture() {
                const swipeDistance = touchEndX - touchStartX;
                
                if (swipeDistance > 100) {
                    // Right swipe (previous)
                    prevPage();
                } else if (swipeDistance < -100) {
                    // Left swipe (next)
                    nextPage();
                }
            }
            
            // Adjust font size (image scale)
            function adjustFontSize(increase) {
                if (increase) {
                    imageScale = Math.min(imageScale + 10, 200);
                } else {
                    imageScale = Math.max(imageScale - 10, 50);
                }
                
                const images = imageContainer.querySelectorAll('.viewer-image');
                images.forEach(img => {
                    img.style.transform = `scale(${imageScale/100})`;
                });
                
                fontSizeValue.textContent = `${imageScale}%`;
            }
            
            // Event listeners
            prevBtn.addEventListener('click', prevPage);
            nextBtn.addEventListener('click', nextPage);
            closeViewer.addEventListener('click', () => {
                chapterViewer.style.display = 'none';
                if (autoScrollInterval) {
                    clearInterval(autoScrollInterval);
                    autoScrollInterval = null;
                    autoScrollToggle.checked = false;
                }
            });
            
            saveChapter.addEventListener('click', saveChapter);
            
            infoButton.addEventListener('click', () => {
                showNovelInfo(currentChapter);
            });
            
            closeInfo.addEventListener('click', () => {
                infoModal.style.display = 'none';
                overlay.style.display = 'none';
            });
            
            savedBtn.addEventListener('click', () => {
                savedDrawer.classList.add('open');
                overlay.style.display = 'block';
            });
            
            closeSaved.addEventListener('click', () => {
                savedDrawer.classList.remove('open');
                overlay.style.display = 'none';
            });
            
            overlay.addEventListener('click', () => {
                infoModal.style.display = 'none';
                savedDrawer.classList.remove('open');
                overlay.style.display = 'none';
            });
            
            nightModeToggle.addEventListener('change', toggleNightMode);
            autoScrollToggle.addEventListener('change', toggleAutoScroll);
            
            increaseFont.addEventListener('click', () => adjustFontSize(true));
            decreaseFont.addEventListener('click', () => adjustFontSize(false));
            
            // Touch events for chapter viewer
            imageContainer.addEventListener('touchstart', function(e) {
                touchStartX = e.changedTouches[0].screenX;
            });
            
            imageContainer.addEventListener('touchend', function(e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipeGesture();
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (chapterViewer.style.display === 'flex') {
                    if (e.key === 'ArrowRight') {
                        prevPage();
                    } else if (e.key === 'ArrowLeft') {
                        nextPage();
                    } else if (e.key === 'Escape') {
                        chapterViewer.style.display = 'none';
                        if (autoScrollInterval) {
                            clearInterval(autoScrollInterval);
                            autoScrollInterval = null;
                            autoScrollToggle.checked = false;
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
